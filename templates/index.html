<!DOCTYPE html>
    <head>
        <title>Tank It</title>
       <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
       <link rel="stylesheet" href="styles.css">
    </head>
    <body>
        <h1>CONTROLS</h1>
        <div class="buttons">
            <button onmousedown="startMove('left')" onmouseup="stopMove()" ontouchstart="startMove('left')" ontouchend="stopMove()">Turn Left</button>
            <button onmousedown="fire()" onmouseup="stopFire()" ontouchstart="fire()" ontouchend="stopFire()">FIRE</button>
            <button onmousedown="startMove('right')" onmouseup="stopMove()"  ontouchstart="startMove('right')" ontouchend="stopMove()">Turn Right</button>

        </div>

        <script>
            let moveInterval = null;
			let fireInterval = null;

			function startMove(dir) {
				if (moveInterval) clearInterval(moveInterval); // clear any existing interval
				moveInterval = setInterval(() => {
					console.log("Sending command:", dir);
					fetch(`/move?dir=${dir}`);
				}, 100);
			}

			function stopMove() {
				if (moveInterval) {
					clearInterval(moveInterval);
					moveInterval = null; // reset
				}
			}

			function fire() {
				if (fireInterval) clearInterval(fireInterval); // clear any existing
				fireInterval = setInterval(() => {
					console.log("Sending command:", "FIRING");
					fetch(`/fire?`);
				}, 100);
			}

			function stopFire() {
				if (fireInterval) {
					clearInterval(fireInterval);
					fireInterval = null;
				}
				fetch(`/stopFire?`);
			}


        </script>
    </body>
</html>
